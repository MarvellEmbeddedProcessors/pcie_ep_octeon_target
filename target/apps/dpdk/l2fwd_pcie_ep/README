How to test l2fwd_pcie_ep application
======================================

l2fwd_pcie_ep can be used to forward packets between CGX/RPM interfaces and SDP

#. Build sdk image and install it on Octeon.
#. Make sure /usr/bin/l2fwd_pcie_ep, /usr/bin/cn98xx-l2fwd-pem0-pf0-3.cfg and
   /usr/bin/l2fwd_pcie_ep_setup.sh are present in rootfs.
#. Build host drivers.
#. Load the drivers on Host in following order:
    .. code-block:: shell-session

    | # insmod octeon_ep.ko
    | # insmod octeon_ep_vf.ko
    | # echo 1 > /sys/bus/pci/devices/<PF pci bdf>/sriov_numvfs
    | Modify the number of VFs that are desired.
    | This example shows the PF and 1 VF enabled. Max supported num_vfs can be found from sriov_numvfs.
    | # ifconfig <host-pf-iface> up


On Octeon linux shell console
-----------------------------
#. Edit /usr/bin/l2fwd_pcie_ep_setup.sh:
	Change the values of SDP_NIX_VF0 and ETH_PF0 to appropriate values.
	Change hugepage setting as per requirement(2MB/512MB).

#. Edit /usr/bin/cn98xx-l2fwd-pem0-pf0-3.cfg:
	Set to_host_dbdf SDP_NIX_VF0 and to_wire_dbdf to ETH_PF0.

#. Run following command
    .. code-block:: shell-session
	# /usr/bin/l2fwd_pcie_ep_setup.sh

#. Run l2fwd_pcie_ep as below
	#/usr/bin/l2fwd_pcie_ep -l0-8 --main-lcore=0 -a $SDP_NIX_VF0 -a $ETH_PF0 -- -f /usr/bin/cn98xx-l2fwd-pem0-pf0-3.cfg -d 8


How to test json-rpc api
=========================
#. Example script /usr/bin/l2fwd_pcie_ep_api_client.py is provided in the rootfs.
   This script exercises all api's supported by the application.
#. Run the script as follows:
    .. code-block:: shell-session

    | # python /usr/bin/l2fwd_pcie_ep_api_client.py

